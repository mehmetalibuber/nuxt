{"version":3,"file":"login-5a2bf658.js","sources":["../../../../../../assets/images/user/login-md.jpg","../../../../../../assets/images/user/login.jpg","../../../../pages/user/login.vue"],"sourcesContent":["export default \"__VITE_PUBLIC_ASSET__520a6353__\"","export default \"__VITE_PUBLIC_ASSET__4f2067b0__\"","<template>\r\n  <Head>\r\n    <Title>{{ $t(\"Login\") }} - Geccele</Title>\r\n    <Meta name=\"description\" content=\"Login\"> </Meta>\r\n  </Head>\r\n  <div class=\"container-fluid px-0 overflow-hidden\">\r\n    <section class=\"login\">\r\n      <div class=\"container-fluid h-custom px-0\">\r\n        <div\r\n          class=\"row d-flex justify-content-center align-items-center px-0 full-h\"\r\n        >\r\n          <div class=\"col-lg-6 px-0 d-none d-lg-block\">\r\n            <picture>\r\n              <source\r\n                media=\"(max-width: 1450px)\"\r\n                srcset=\"/assets/images/user/login-md.jpg\"\r\n              />\r\n              <source\r\n                media=\"(min-width: 1250px)\"\r\n                srcset=\"/assets/images/user/login.jpg\"\r\n              />\r\n              <img\r\n                src=\"/assets/images/user/login.jpg\"\r\n                alt=\"login\"\r\n                loading=\"lazy\"\r\n              />\r\n            </picture>\r\n          </div>\r\n          <div class=\"col-lg-6 py-5\">\r\n            <div class=\"content text-center\">\r\n              <h2>{{ $t(\"Welcome\") }}!</h2>\r\n              <p class=\"opacity-50 m-0\">\r\n                {{ $t(\"GDPRShortTerm\") }}&nbsp;\r\n                <nuxt-link\r\n                  :to=\"LocalePath('/contracts/gdpr')\"\r\n                  target=\"_blank\"\r\n                  >{{ $t(\"GDPR\") }}</nuxt-link\r\n                >\r\n                &nbsp;|&nbsp;\r\n                <nuxt-link\r\n                  :to=\"LocalePath('/contracts/cookie-policy')\"\r\n                  target=\"_blank\"\r\n                  >{{ $t(\"CookiePolicy\") }}</nuxt-link\r\n                >\r\n              </p>\r\n              <div class=\"my-2\">\r\n                <div style=\"height: 20px\">\r\n                  <p v-if=\"SuccessMessage\" class=\"text-success\">\r\n                    {{ $t(SuccessMessage) }}\r\n                  </p>\r\n                </div>\r\n                <ul\r\n                  class=\"nav nav-tabs d-flex justify-content-center\"\r\n                  id=\"myTab\"\r\n                  role=\"tablist\"\r\n                >\r\n                  <li class=\"nav-item\" role=\"presentation\">\r\n                    <button\r\n                      class=\"nav-link active\"\r\n                      id=\"profile-tab\"\r\n                      data-bs-toggle=\"tab\"\r\n                      data-bs-target=\"#profile\"\r\n                      type=\"button\"\r\n                      role=\"tab\"\r\n                      aria-controls=\"profile\"\r\n                      aria-selected=\"false\"\r\n                    >\r\n                      {{ $t(\"LoginWithUserInformations\") }}\r\n                    </button>\r\n                  </li>\r\n                  <li class=\"nav-item\" role=\"presentation\">\r\n                    <button\r\n                      class=\"nav-link\"\r\n                      id=\"home-tab\"\r\n                      data-bs-toggle=\"tab\"\r\n                      data-bs-target=\"#home\"\r\n                      type=\"button\"\r\n                      role=\"tab\"\r\n                      aria-controls=\"home\"\r\n                      aria-selected=\"true\"\r\n                    >\r\n                      {{ $t(\"QuickLogin\") }}\r\n                    </button>\r\n                  </li>\r\n                </ul>\r\n                <div class=\"tab-content\" id=\"myTabContent\">\r\n                  <div\r\n                    class=\"tab-pane fade show active\"\r\n                    id=\"profile\"\r\n                    role=\"tabpanel\"\r\n                    aria-labelledby=\"profile-tab\"\r\n                  >\r\n                    <form class=\"py-2\">\r\n                      <!-- Email input -->\r\n                      <div class=\"form-outline mb-3\">\r\n                        <!-- <label class=\"form-label\" for=\"form3Example3\"\r\n                          >{{ $t(\"EmailAddress\") }}\r\n                        </label> -->\r\n                        <input\r\n                          type=\"email\"\r\n                          id=\"form3Example3\"\r\n                          class=\"form-control form-control-lg\"\r\n                          :placeholder=\"$t('EmailAddressOrPhoneNumber')\"\r\n                          v-model=\"GuestUserName\"\r\n                        />\r\n                      </div>\r\n\r\n                      <!-- Password input -->\r\n                      <div class=\"form-outline mb-3\">\r\n                        <!-- <label class=\"form-label\" for=\"form3Example4\"\r\n                          >{{ $t(\"Password\") }}\r\n                        </label> -->\r\n                        <input\r\n                          type=\"password\"\r\n                          id=\"form3Example4\"\r\n                          class=\"form-control form-control-lg\"\r\n                          :placeholder=\"$t('Password')\"\r\n                          v-model=\"GuestPassword\"\r\n                        />\r\n                      </div>\r\n\r\n                      <div\r\n                        class=\"d-flex justify-content-between align-items-center\"\r\n                      >\r\n                        <div class=\"form-check mb-0\">\r\n                          <input\r\n                            class=\"form-check-input me-2\"\r\n                            type=\"checkbox\"\r\n                            value=\"\"\r\n                            id=\"form2Example3\"\r\n                          />\r\n                          <label\r\n                            class=\"form-check-label opacity-50\"\r\n                            for=\"form2Example3\"\r\n                          >\r\n                            {{ $t(\"RememberMe\") }}\r\n                          </label>\r\n                        </div>\r\n                        <!-- <NuxtLink\r\n                          :to=\"localPath('/user/forgot-password')\"\r\n                          class=\"text-body opacity-50\"\r\n                          title=\"ForgotPassword\"\r\n                          >{{ $t(\"ForgotPassword\") }}</NuxtLink\r\n                        > -->\r\n                      </div>\r\n                      <div class=\"text-center text-lg-start mt-2 pt-2\">\r\n                        <button\r\n                          type=\"button\"\r\n                          class=\"btn btn-lg\"\r\n                          style=\"padding-left: 2.5rem; padding-right: 2.5rem\"\r\n                          @click=\"CheckInformation()\"\r\n                          :disabled=\"LoginProgress\"\r\n                        >\r\n                          {{ $t(\"Login\") }}\r\n                        </button>\r\n                        <div class=\"mt-2\">\r\n                          <div\r\n                            class=\"text-danger text-center\"\r\n                            style=\"height: 20px\"\r\n                          >\r\n                            <p v-if=\"ErrorMessage\">* {{ $t(ErrorMessage) }}</p>\r\n                          </div>\r\n                        </div>\r\n                        <p class=\"mt-5 pt-1 mb-0 text-center\">\r\n                          {{ $t(\"DontHaveAnAccount\") }}\r\n                          <NuxtLink\r\n                            :to=\"localPath('/user/register')\"\r\n                            class=\"link fw-bold\"\r\n                            :title=\"$t('Register')\"\r\n                            >{{ $t(\"Register\") }}</NuxtLink\r\n                          >\r\n                        </p>\r\n                      </div>\r\n                    </form>\r\n                  </div>\r\n                  <div\r\n                    class=\"tab-pane fade\"\r\n                    id=\"home\"\r\n                    role=\"tabpanel\"\r\n                    aria-labelledby=\"home-tab\"\r\n                  >\r\n                    <form class=\"py-2\">\r\n                      <!-- phone number input -->\r\n                      <div class=\"form-outline mb-3\">\r\n                        <!-- <label class=\"form-label\" for=\"phone\"\r\n                          >{{ $t(\"PhoneNumber\") }}\r\n                        </label> -->\r\n                        <div class=\"row phone-space\">\r\n                          <div class=\"col-lg-2\">\r\n                            <select name=\"\" id=\"\">\r\n                              <option value=\"+90\" selected>+90</option>\r\n                            </select>\r\n                          </div>\r\n                          <div class=\"col-lg-10\">\r\n                            <input\r\n                              type=\"tel\"\r\n                              id=\"phone\"\r\n                              maxlength=\"10\"\r\n                              class=\"form-control form-control-lg\"\r\n                              :placeholder=\"$t('PhoneNumberMask')\"\r\n                              v-model=\"GuestPhoneNumber\"\r\n                              @input=\"MaskPhoneNumber\"\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <!-- code input -->\r\n                      <div\r\n                        class=\"form-outline mb-3\"\r\n                        v-if=\"ShowVerificationCodeInput\"\r\n                      >\r\n                        <div class=\"row\">\r\n                          <div class=\"col-lg-6\">\r\n                            <div class=\"col\">\r\n                              <label\r\n                                class=\"form-label w-100 text-start\"\r\n                                for=\"code\"\r\n                                >{{ $t(\"VerificationCode\") }}\r\n                              </label>\r\n                              <input\r\n                                type=\"password\"\r\n                                id=\"code\"\r\n                                class=\"form-control form-control-lg w-100\"\r\n                                :placeholder=\"$t('VerificationCode')\"\r\n                                v-model=\"VerificationCode\"\r\n                                :disabled=\"VerificationCodePending\"\r\n                                maxlength=\"5\"\r\n                              />\r\n                            </div>\r\n                          </div>\r\n                          <div class=\"col d-flex align-items-end\">\r\n                            <span\r\n                              v-if=\"SendVerificationButton\"\r\n                              @click=\"SendVerificationCode()\"\r\n                              style=\"\r\n                                font-size: 14px;\r\n                                cursor: pointer;\r\n                                margin-bottom: 10px;\r\n                                opacity: 0.8;\r\n                              \"\r\n                              class=\"my-2\"\r\n                              >{{ $t(\"GetNewCode\") }} ↺</span\r\n                            >\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div\r\n                        class=\"d-flex justify-content-between align-items-center\"\r\n                      >\r\n                        <span\r\n                          v-if=\"!ResendVerificationCode\"\r\n                          @click=\"SendVerificationCode()\"\r\n                          class=\"send-code-btn btn\"\r\n                        >\r\n                          {{ $t(\"GetVerificationCode\") }}\r\n                        </span>\r\n                      </div>\r\n\r\n                      <div class=\"text-center text-lg-start mt-0 pt-2 mb-2\">\r\n                        <button\r\n                          v-if=\"SendVerificationButton\"\r\n                          type=\"button\"\r\n                          class=\"verification-bordered-btn btn-lg\"\r\n                          style=\"padding-left: 2.5rem; padding-right: 2.5rem\"\r\n                          @click=\"LoginWithPhoneNumber()\"\r\n                          :disabled=\"LoginProgress\"\r\n                        >\r\n                          {{ $t(\"Confirm\") }}\r\n                        </button>\r\n                      </div>\r\n                      <div class=\"mt-0\">\r\n                        <div class=\"text-danger\" style=\"height: 20px\">\r\n                          <p v-if=\"ErrorMessage\">* {{ $t(ErrorMessage) }}</p>\r\n                        </div>\r\n                      </div>\r\n                    </form>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <!-- <Google-Signin /> -->\r\n              </div>\r\n              <div>\r\n                <NuxtLink\r\n                  :to=\"localPath('/')\"\r\n                  class=\"text-dark opacity-50 text-decoration-none fs-6\"\r\n                  :title=\"$t('BackHome')\"\r\n                  >&#x2936; {{ $t(\"BackHome\") }}</NuxtLink\r\n                >\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  </div>\r\n</template>\r\n<script setup>\r\ndefinePageMeta({\r\n  layout: \"empty\",\r\n});\r\nconst localPath = useLocalePath();\r\nconst Auth = useCookie(\"isAuthenticated\");\r\nconst snackbar = useSnackbar(); // info modal(success - warning - fail)\r\nconst LocalePath = useLocalePath(); // localization\r\nconst Router = useRouter(); // router\r\nconst Route = useRoute(); // route\r\nconst { t } = useI18n(); // localization\r\n// user state\r\n//const User = useState(\"User\");\r\nconst CookieUser = useCookie(\"User\", {\r\n  maxAge: 60 * 60 * 24 * 30,\r\n  path: \"/\",\r\n  sameSite: \"Strict\",\r\n});\r\n// guest login form\r\nlet GuestUserName = ref(\"\");\r\nlet GuestPassword = ref(\"\");\r\n// login btn progress\r\nconst LoginProgress = ref(false);\r\n// Error Message\r\nconst ErrorMessage = ref(\"\");\r\n// Success Message\r\nconst SuccessMessage = ref(\"\");\r\n// verify code input controls\r\nconst VerificationCodePending = ref(true);\r\n// show verification code input\r\nconst ShowVerificationCodeInput = ref(false);\r\n// send verification code\r\nconst SendVerificationButton = ref(false);\r\n// guest phone number\r\nconst GuestPhoneNumber = ref(\"\");\r\n// verification code\r\nconst VerificationCode = ref(\"\");\r\n// resend verification code\r\nconst ResendVerificationCode = ref(false);\r\n// cookie estate id\r\nconst CookieEstateID = useCookie(\"EstateID\");\r\n\r\nonMounted(() => {\r\n  const Status = Route.query.status;\r\n  if (Status === \"success\") {\r\n    SuccessMessage.value = \"RegisterSuccess\";\r\n  }\r\n});\r\n// check phone number\r\nconst MaskPhoneNumber = (event) => {\r\n  const FormattedPhoneNumber = event.target.value.replace(/\\D/g, \"\");\r\n  GuestPhoneNumber.value = FormattedPhoneNumber;\r\n};\r\n// send verification code\r\nconst SendVerificationCode = async () => {\r\n  ErrorMessage.value = \"\";\r\n  const PhoneResponse = HelperComposable().CheckGuestPhoneNumber(\r\n    GuestPhoneNumber.value\r\n  );\r\n  if (PhoneResponse == 1) {\r\n    return (ErrorMessage.value = \"InvalidPhoneNumber\");\r\n  }\r\n  const PhoneLoginResponse = await AuthComposable().GetLoginVerificationCode(\r\n    GuestPhoneNumber.value\r\n  );\r\n  // console.log(PhoneLoginResponse);\r\n  if (PhoneLoginResponse) {\r\n    // console.log(PhoneLoginResponse);\r\n    if (PhoneLoginResponse.data) {\r\n      const ResData = PhoneLoginResponse.data;\r\n      // console.log(ResData);\r\n      if (ResData === \"success\") {\r\n        VerificationCodePending.value = false;\r\n        ResendVerificationCode.value = true;\r\n        ShowVerificationCodeInput.value = true;\r\n        SendVerificationButton.value = true;\r\n      }\r\n    }\r\n  }\r\n};\r\n// login with phone number\r\nconst LoginWithPhoneNumber = () => {\r\n  const LoginResponse = AuthComposable().ConfirmVerificationCode(\r\n    VerificationCode.value,\r\n    GuestPhoneNumber.value\r\n  );\r\n  LoginProgress.value = true;\r\n\r\n  LoginResponse.then((response) => {\r\n    // console.log(response);\r\n    if (!response) {\r\n      return (ErrorMessage.value =\r\n        \"Giriş kodu hatalı veya sistemsel bir sorun oluştu.\");\r\n    }\r\n    // LoginResponse.value = false;\r\n\r\n    if (response.data) {\r\n      if (response.data.accessToken) {\r\n        const AccessToken = response.data.accessToken;\r\n        CookieUser.value = \"true\";\r\n        // set access token\r\n        AddAccessTokenToStorage(AccessToken);\r\n      } else {\r\n        return (ErrorMessage.value = response);\r\n      }\r\n    } else {\r\n      if (response.length > 0) {\r\n        if (response[0].message) {\r\n          return (ErrorMessage.value = response[0].message);\r\n        }\r\n      }\r\n      return (ErrorMessage.value = response);\r\n    }\r\n  }).catch((error) => {\r\n    console.log(error);\r\n  });\r\n};\r\nconst CheckInformation = async () => {\r\n  ErrorMessage.value = \"\";\r\n  const UserNameResponse = HelperComposable().CheckGuestUserName(\r\n    GuestUserName.value\r\n  );\r\n  if (UserNameResponse != true) {\r\n    return (ErrorMessage.value = \"InvalidUserName\");\r\n  }\r\n  // password\r\n  if (!GuestPassword.value) {\r\n    return (ErrorMessage.value = \"PasswordNotBeEmpty\");\r\n  }\r\n  const PasswordResponse = HelperComposable().CheckPasswordStrength(\r\n    GuestPassword.value\r\n  );\r\n  if (!PasswordResponse) {\r\n    return (ErrorMessage.value = \"YourPasswordMustBe\");\r\n  }\r\n  // disabled button\r\n  LoginProgress.value = true;\r\n  // prepare login data\r\n  await PrepareLoginData();\r\n};\r\nconst PrepareLoginData = async () => {\r\n  const LoginData = {\r\n    email: GuestUserName.value,\r\n    password: GuestPassword.value,\r\n  };\r\n  const LoginResponse = AuthComposable().SendLoginData(LoginData);\r\n  LoginResponse.then((response) => {\r\n    //  console.log(response);\r\n    // LoginResponse.value = false;\r\n    if (response.data) {\r\n      if (response.data.userData) {\r\n        const AccessToken = response.data.accessToken;\r\n        // set state\r\n        //User.value = response.data;\r\n        // set user cookie\r\n        CookieUser.value = response.data.userData;\r\n        // set access token\r\n        AddAccessTokenToStorage(AccessToken);\r\n      } else {\r\n        return (ErrorMessage.value = response);\r\n      }\r\n    } else {\r\n      return (ErrorMessage.value = response);\r\n    }\r\n  }).catch((error) => {\r\n    console.log(error);\r\n  });\r\n};\r\nconst AddAccessTokenToStorage = (AccessToken) => {\r\n  LoginProgress.value = false;\r\n  localStorage.setItem(\"AccessToken\", AccessToken);\r\n  const RedirectAfterLogin = localStorage.getItem(\"RedirectAfterLogin\");\r\n  if (RedirectAfterLogin) {\r\n    localStorage.removeItem(\"redirectAfterLogin\");\r\n    return Router.push(RedirectAfterLogin);\r\n  } else {\r\n    return Router.push(LocalePath(\"/\"));\r\n  }\r\n};\r\n// snackbar design\r\nconst Snackbar = (text, type) => {\r\n  snackbar.add({\r\n    type,\r\n    text,\r\n  });\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.verification-bordered-btn {\r\n  background-color: #214280;\r\n  border: none;\r\n  color: #fff;\r\n  border-radius: 6px;\r\n  padding: 8px 12px;\r\n  width: 100%;\r\n  transition: 0.4s all ease;\r\n}\r\n.verification-bordered-btn:hover {\r\n  background-color: #214280;\r\n  color: #fff;\r\n  transform: translateY(-3px);\r\n}\r\n.login .btn:active {\r\n  background-color: #214280;\r\n  color: #fff;\r\n}\r\n.login .nav-tabs {\r\n  border: none;\r\n}\r\n.login .nav-tabs .nav-link {\r\n  margin-left: 6px;\r\n  color: #000;\r\n  border: none;\r\n  opacity: 0.5;\r\n}\r\n.login .nav-tabs .nav-link.active {\r\n  /* border-bottom: 2px solid #ebebeb; */\r\n  opacity: 1;\r\n}\r\n.login small {\r\n  color: red;\r\n}\r\n.login .link,\r\n.login h2 {\r\n  color: #214280;\r\n}\r\n.login .full-h {\r\n  height: 100vh;\r\n}\r\n.login .col-lg-6 {\r\n  /* padding: 35px 30px 35px 30px; */\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.login .content {\r\n  width: 500px;\r\n}\r\n.login .divider:after,\r\n.login .divider:before {\r\n  content: \"\";\r\n  flex: 1;\r\n  height: 1px;\r\n  background: #fff;\r\n}\r\n.login .h-custom {\r\n  height: 100vh;\r\n}\r\n.login .h-custom img {\r\n  height: 100vh;\r\n  width: 100%;\r\n  object-fit: cover;\r\n}\r\n.login h2 {\r\n  font-size: 1.4em;\r\n}\r\n.login button.btn {\r\n  background-color: #214280;\r\n  color: #fff;\r\n  transition: 0.4s all ease;\r\n  font-size: 16px;\r\n  width: 100%;\r\n}\r\n.login button.btn:hover {\r\n  background-color: #214280;\r\n  color: #fff;\r\n  transform: translateY(-3px);\r\n}\r\n.login input::placeholder {\r\n  font-size: 14px;\r\n  color: #808080;\r\n}\r\n.login label {\r\n  margin-bottom: 2px;\r\n  font-size: 16px;\r\n}\r\n.phone-space select {\r\n  height: 100%;\r\n  width: 100%;\r\n  background-color: transparent;\r\n  border: 1px solid #ebebeb;\r\n  border-radius: 6px;\r\n}\r\n.send-code-btn {\r\n  border: none;\r\n  padding: 8px 0;\r\n  border-radius: 6px;\r\n  background-color: #214280;\r\n  color: #fff;\r\n  cursor: pointer;\r\n  width: 100%;\r\n  transition: 0.4s all ease;\r\n}\r\n.send-code-btn:hover {\r\n  background-color: #214280;\r\n  color: #fff;\r\n  transform: translateY(-3px);\r\n}\r\n@media (max-width: 1450px) {\r\n  .login .h-custom img {\r\n    height: auto;\r\n  }\r\n}\r\n@media (max-width: 996px) {\r\n  .phone-space select {\r\n    width: max-content;\r\n    padding: 6px;\r\n  }\r\n  .phone-space .col-lg-9 {\r\n    margin-top: 6px;\r\n  }\r\n  .login .content {\r\n    width: 450px;\r\n  }\r\n  .phone-space .col-lg-2 {\r\n    display: flex;\r\n    margin-bottom: 6px;\r\n  }\r\n}\r\n@media (max-width: 450px) {\r\n  .login .h-custom {\r\n    height: 100%;\r\n  }\r\n  .login .content {\r\n    width: 350px;\r\n  }\r\n}\r\n</style>\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAe,aAAA,KAAA,kBAAA,iCAAA;ACAf,MAAe,aAAA,KAAA,kBAAA,8BAAA;;;;;;AC+Sf,UAAM,YAAY,cAAa;AAClB,cAAU,iBAAiB;AACvB,gBAAc;AAC/B,UAAM,aAAa,cAAa;AACjB,cAAY;AACb,aAAW;AACX,YAAU;AAGL,cAAU,QAAQ;AAAA,MACnC,QAAQ,KAAK,KAAK,KAAK;AAAA,MACvB,MAAM;AAAA,MACN,UAAU;AAAA,IACZ,CAAC;AAED,QAAI,gBAAgB,IAAI,EAAE;AAC1B,QAAI,gBAAgB,IAAI,EAAE;AAE1B,UAAM,gBAAgB,IAAI,KAAK;AAE/B,UAAM,eAAe,IAAI,EAAE;AAE3B,UAAM,iBAAiB,IAAI,EAAE;AAE7B,UAAM,0BAA0B,IAAI,IAAI;AAExC,UAAM,4BAA4B,IAAI,KAAK;AAE3C,UAAM,yBAAyB,IAAI,KAAK;AAExC,UAAM,mBAAmB,IAAI,EAAE;AAE/B,UAAM,mBAAmB,IAAI,EAAE;AAE/B,UAAM,yBAAyB,IAAI,KAAK;AAEjB,cAAU,UAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}