{"version":3,"file":"ReservationComposable-1557cdd6.js","sources":["../../../../composables/ReservationComposable.js"],"sourcesContent":["import axiosConfig from \"../axiosConfig.js\";\r\nimport config from \"../config.js\";\r\n\r\n// get CRM_HOST from env // dev or prod\r\nlet CRMHost;\r\nconst CRMHostRes = HelperComposable().GetCRMHost();\r\nCRMHostRes.then((res) => {\r\n  CRMHost = res;\r\n}).catch((error) => {\r\n  console.error(error);\r\n});\r\n\r\nfunction ReservationComposable() {\r\n  let CrmWebsite = config.CRM_WEBSITE;\r\n  let CrmPaymentType = config.CRM_PAYMENT_TYPE;\r\n\r\n  //cookie\r\n  const CookieResID = useCookie(\"CookieResID\");\r\n  const CookieEstateID = useCookie(\"EstateID\");\r\n\r\n  // send reservation data\r\n  const SendReservationData = async (data) => {\r\n    let RawData = null;\r\n    const AccessToken = localStorage.getItem(\"AccessToken\");\r\n    if (!AccessToken) {\r\n      return \"Please login again\";\r\n    }\r\n    if (!data) {\r\n      return \"1\";\r\n    }\r\n    data.webSite = Number(CrmWebsite);\r\n    data.paymentType = Number(CrmPaymentType);\r\n    const AxiosResponse = await axiosConfig.post(\r\n      `${CRMHost}/reservations`,\r\n      data,\r\n      {\r\n        headers: {\r\n          Authorization: `Bearer ${AccessToken}`,\r\n        },\r\n      }\r\n    );\r\n    if (AxiosResponse) {\r\n      if (AxiosResponse.data) {\r\n        RawData = AxiosResponse.data;\r\n      }\r\n      if (AxiosResponse.message) {\r\n        return AxiosResponse.message;\r\n      }\r\n    }\r\n    return RawData;\r\n  };\r\n  // confirm phone number\r\n  const ConfirmPhoneNumber = async (code) => {\r\n    let RawData = null;\r\n    if (!code) {\r\n      return \"Verification Code Error\";\r\n    }\r\n    if (!CookieResID.value) {\r\n      return \"Reservation ID Error\";\r\n    }\r\n    const AxiosResponse = await axiosConfig.get(\r\n      `${CRMHost}/reservations?code=${code}&webSite=${CrmWebsite}&reservationId=${CookieResID.value}`\r\n    );\r\n    RawData = AxiosResponse.data;\r\n    return RawData;\r\n  };\r\n  // check availability //comp.\r\n  const CheckAvailability = async (CheckIn, CheckOut) => {\r\n    let RawData = null;\r\n    let EstateID = CookieEstateID.value;\r\n    if (!EstateID) {\r\n      return \"1\";\r\n    }\r\n    if (!CheckIn) {\r\n      return \"please select check-in date\";\r\n    }\r\n    if (!CheckOut) {\r\n      return \"please select check-out date\";\r\n    }\r\n    try {\r\n      const AxiosResponse = await axiosConfig.get(\r\n        `${CRMHost}/estates/free?webSite=${CrmWebsite}&endDate=${CheckOut}&startDate=${CheckIn}&estateId=${EstateID}`\r\n      );\r\n      if (!AxiosResponse) {\r\n        return \"1\";\r\n      }\r\n      if (!AxiosResponse.data) {\r\n        return AxiosResponse.message;\r\n      }\r\n      RawData = AxiosResponse.data;\r\n      return RawData;\r\n    } catch (error) {\r\n      let err = error.request;\r\n      return JSON.parse(err.response).message;\r\n    }\r\n  };\r\n\r\n  // call back\r\n  const SendCallBackInfo = async (data) => {\r\n    let RawData = null;\r\n    if (!data) {\r\n      return \"Call Back Error\";\r\n    }\r\n\r\n    const AxiosResponse = await axiosConfig.post(`${CRMHost}/contact-us`, data);\r\n    RawData = AxiosResponse.data;\r\n    return RawData;\r\n  };\r\n  return {\r\n    SendReservationData,\r\n    ConfirmPhoneNumber,\r\n    CheckAvailability,\r\n    SendCallBackInfo,\r\n  };\r\n}\r\nexport default ReservationComposable;\r\n"],"names":["axiosConfig"],"mappings":";;;;;;;;AAIA,IAAI;AACJ,MAAM,aAAa,mBAAmB;AACtC,WAAW,KAAK,CAAC,QAAQ;AACvB,YAAU;AACZ,CAAC,EAAE,MAAM,CAAC,UAAU;AAClB,UAAQ,MAAM,KAAK;AACrB,CAAC;AAED,SAAS,wBAAwB;AAC/B,MAAI,aAAa,OAAO;AACxB,MAAI,iBAAiB,OAAO;AAG5B,QAAM,cAAc,UAAU,aAAa;AAC3C,QAAM,iBAAiB,UAAU,UAAU;AAG3C,QAAM,sBAAsB,OAAO,SAAS;AAC1C,QAAI,UAAU;AACd,UAAM,cAAc,aAAa,QAAQ,aAAa;AACtD,QAAI,CAAC,aAAa;AAChB,aAAO;AAAA,IACR;AACD,QAAI,CAAC,MAAM;AACT,aAAO;AAAA,IACR;AACD,SAAK,UAAU,OAAO,UAAU;AAChC,SAAK,cAAc,OAAO,cAAc;AACxC,UAAM,gBAAgB,MAAMA,SAAY;AAAA,MACtC,GAAG,OAAO;AAAA,MACV;AAAA,MACA;AAAA,QACE,SAAS;AAAA,UACP,eAAe,UAAU,WAAW;AAAA,QACrC;AAAA,MACF;AAAA,IACP;AACI,QAAI,eAAe;AACjB,UAAI,cAAc,MAAM;AACtB,kBAAU,cAAc;AAAA,MACzB;AACD,UAAI,cAAc,SAAS;AACzB,eAAO,cAAc;AAAA,MACtB;AAAA,IACF;AACD,WAAO;AAAA,EACX;AAEE,QAAM,qBAAqB,OAAO,SAAS;AACzC,QAAI,UAAU;AACd,QAAI,CAAC,MAAM;AACT,aAAO;AAAA,IACR;AACD,QAAI,CAAC,YAAY,OAAO;AACtB,aAAO;AAAA,IACR;AACD,UAAM,gBAAgB,MAAMA,SAAY;AAAA,MACtC,GAAG,OAAO,sBAAsB,IAAI,YAAY,UAAU,kBAAkB,YAAY,KAAK;AAAA,IACnG;AACI,cAAU,cAAc;AACxB,WAAO;AAAA,EACX;AAEE,QAAM,oBAAoB,OAAO,SAAS,aAAa;AACrD,QAAI,UAAU;AACd,QAAI,WAAW,eAAe;AAC9B,QAAI,CAAC,UAAU;AACb,aAAO;AAAA,IACR;AACD,QAAI,CAAC,SAAS;AACZ,aAAO;AAAA,IACR;AACD,QAAI,CAAC,UAAU;AACb,aAAO;AAAA,IACR;AACD,QAAI;AACF,YAAM,gBAAgB,MAAMA,SAAY;AAAA,QACtC,GAAG,OAAO,yBAAyB,UAAU,YAAY,QAAQ,cAAc,OAAO,aAAa,QAAQ;AAAA,MACnH;AACM,UAAI,CAAC,eAAe;AAClB,eAAO;AAAA,MACR;AACD,UAAI,CAAC,cAAc,MAAM;AACvB,eAAO,cAAc;AAAA,MACtB;AACD,gBAAU,cAAc;AACxB,aAAO;AAAA,IACR,SAAQ,OAAO;AACd,UAAI,MAAM,MAAM;AAChB,aAAO,KAAK,MAAM,IAAI,QAAQ,EAAE;AAAA,IACjC;AAAA,EACL;AAGE,QAAM,mBAAmB,OAAO,SAAS;AACvC,QAAI,UAAU;AACd,QAAI,CAAC,MAAM;AACT,aAAO;AAAA,IACR;AAED,UAAM,gBAAgB,MAAMA,SAAY,KAAK,GAAG,OAAO,eAAe,IAAI;AAC1E,cAAU,cAAc;AACxB,WAAO;AAAA,EACX;AACE,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACJ;AACA;"}