import{H as K,T as X,M as Z}from"./components.44dcd752.js";import{_ as j}from"./nuxt-link.b209ea92.js";import{a6 as ee,j as te,u as oe,i as se,r as c,l as ae,c as r,b as _,w as g,a as e,t as a,d,g as s,q as h,M as k,a4 as w,n as C,F as ne,o as u,p as le,e as ie}from"./entry.9f466ac5.js";import{u as F}from"./composables.b206063b.js";import{u as N}from"./cookie.b7c4a9ce.js";import{H as S}from"./axiosConfig.e8b54ef2.js";import{A as V}from"./AuthComposable.8f59b3d7.js";import{_ as ce}from"./_plugin-vue_export-helper.c27b6911.js";import"./vue.f36acd1f.8c1d558a.js";const re=""+globalThis.__publicAssetsURL("assets/images/user/login-md.jpg"),W=""+globalThis.__publicAssetsURL("assets/images/user/login.jpg");const R=b=>(le("data-v-a779432e"),b=b(),ie(),b),de=re,ue=W,me={class:"container-fluid px-0 overflow-hidden"},pe={class:"login"},_e={class:"container-fluid h-custom px-0"},he={class:"row d-flex justify-content-center align-items-center px-0 full-h"},fe=R(()=>e("div",{class:"col-lg-6 px-0 d-none d-lg-block"},[e("picture",null,[e("source",{media:"(max-width: 1450px)",srcset:de}),e("source",{media:"(min-width: 1250px)",srcset:ue}),e("img",{src:W,alt:"login",loading:"lazy"})])],-1)),ge={class:"col-lg-6 py-5"},ve={class:"content text-center"},be={class:"opacity-50 m-0"},ye={class:"my-2"},ke={style:{height:"20px"}},we={key:0,class:"text-success"},Ce={class:"nav nav-tabs d-flex justify-content-center",id:"myTab",role:"tablist"},Re={class:"nav-item",role:"presentation"},Pe={class:"nav-link active",id:"profile-tab","data-bs-toggle":"tab","data-bs-target":"#profile",type:"button",role:"tab","aria-controls":"profile","aria-selected":"false"},$e={class:"nav-item",role:"presentation"},xe={class:"nav-link",id:"home-tab","data-bs-toggle":"tab","data-bs-target":"#home",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"},Le={class:"tab-content",id:"myTabContent"},Ne={class:"tab-pane fade show active",id:"profile",role:"tabpanel","aria-labelledby":"profile-tab"},Se={class:"py-2"},Ve={class:"form-outline mb-3"},Te=["placeholder"],Ae={class:"form-outline mb-3"},Ie=["placeholder"],De={class:"d-flex justify-content-between align-items-center"},Ue={class:"form-check mb-0"},Ge=R(()=>e("input",{class:"form-check-input me-2",type:"checkbox",value:"",id:"form2Example3"},null,-1)),Me={class:"form-check-label opacity-50",for:"form2Example3"},Ee={class:"text-center text-lg-start mt-2 pt-2"},Be=["disabled"],He={class:"mt-2"},je={class:"text-danger text-center",style:{height:"20px"}},Fe={key:0},We={class:"mt-5 pt-1 mb-0 text-center"},qe={class:"tab-pane fade",id:"home",role:"tabpanel","aria-labelledby":"home-tab"},ze={class:"py-2"},Oe={class:"form-outline mb-3"},Qe={class:"row phone-space"},Ye=R(()=>e("div",{class:"col-lg-2"},[e("select",{name:"",id:""},[e("option",{value:"+90",selected:""},"+90")])],-1)),Je={class:"col-lg-10"},Ke=["placeholder"],Xe={key:0,class:"form-outline mb-3"},Ze={class:"row"},et={class:"col-lg-6"},tt={class:"col"},ot={class:"form-label w-100 text-start",for:"code"},st=["placeholder","disabled"],at={class:"col d-flex align-items-end"},nt={class:"d-flex justify-content-between align-items-center"},lt={class:"text-center text-lg-start mt-0 pt-2 mb-2"},it=["disabled"],ct={class:"mt-0"},rt={class:"text-danger",style:{height:"20px"}},dt={key:0},ut=R(()=>e("div",null,null,-1)),mt={__name:"login",setup(b){const T=F();N("isAuthenticated"),ee();const P=F(),A=te(),q=oe();se();const I=N("User",{maxAge:60*60*24*30,path:"/",sameSite:"Strict"});let f=c(""),m=c("");const v=c(!1),n=c(""),$=c(""),D=c(!0),U=c(!1),x=c(!1),p=c(""),y=c(""),G=c(!1);N("EstateID"),ae(()=>{q.query.status==="success"&&($.value="RegisterSuccess")});const z=o=>{const t=o.target.value.replace(/\D/g,"");p.value=t},M=async()=>{if(n.value="",S().CheckGuestPhoneNumber(p.value)==1)return n.value="InvalidPhoneNumber";const t=await V().GetLoginVerificationCode(p.value);t&&t.data&&t.data==="success"&&(D.value=!1,G.value=!0,U.value=!0,x.value=!0)},O=()=>{const o=V().ConfirmVerificationCode(y.value,p.value);v.value=!0,o.then(t=>{if(!t)return n.value="Giriş kodu hatalı veya sistemsel bir sorun oluştu.";if(t.data)if(t.data.accessToken){const l=t.data.accessToken;I.value="true",E(l)}else return n.value=t;else return t.length>0&&t[0].message?n.value=t[0].message:n.value=t}).catch(t=>{console.log(t)})},Q=async()=>{if(n.value="",S().CheckGuestUserName(f.value)!=!0)return n.value="InvalidUserName";if(!m.value)return n.value="PasswordNotBeEmpty";if(!S().CheckPasswordStrength(m.value))return n.value="YourPasswordMustBe";v.value=!0,await Y()},Y=async()=>{const o={email:f.value,password:m.value};V().SendLoginData(o).then(l=>{if(l.data)if(l.data.userData){const L=l.data.accessToken;I.value=l.data.userData,E(L)}else return n.value=l;else return n.value=l}).catch(l=>{console.log(l)})},E=o=>{v.value=!1,localStorage.setItem("AccessToken",o);const t=localStorage.getItem("RedirectAfterLogin");return t?(localStorage.removeItem("redirectAfterLogin"),A.push(t)):A.push(P("/"))};return(o,t)=>{const l=X,L=Z,J=K,B=j,H=j;return u(),r(ne,null,[_(J,null,{default:g(()=>[_(l,null,{default:g(()=>[d(a(o.$t("Login"))+" - Geccele",1)]),_:1}),_(L,{name:"description",content:"Login"})]),_:1}),e("div",me,[e("section",pe,[e("div",_e,[e("div",he,[fe,e("div",ge,[e("div",ve,[e("h2",null,a(o.$t("Welcome"))+"!",1),e("p",be,[d(a(o.$t("GDPRShortTerm"))+"  ",1),_(B,{to:s(P)("/contracts/gdpr"),target:"_blank"},{default:g(()=>[d(a(o.$t("GDPR")),1)]),_:1},8,["to"]),d("  |  "),_(B,{to:s(P)("/contracts/cookie-policy"),target:"_blank"},{default:g(()=>[d(a(o.$t("CookiePolicy")),1)]),_:1},8,["to"])]),e("div",ye,[e("div",ke,[s($)?(u(),r("p",we,a(o.$t(s($))),1)):h("",!0)]),e("ul",Ce,[e("li",Re,[e("button",Pe,a(o.$t("LoginWithUserInformations")),1)]),e("li",$e,[e("button",xe,a(o.$t("QuickLogin")),1)])]),e("div",Le,[e("div",Ne,[e("form",Se,[e("div",Ve,[k(e("input",{type:"email",id:"form3Example3",class:"form-control form-control-lg",placeholder:o.$t("EmailAddressOrPhoneNumber"),"onUpdate:modelValue":t[0]||(t[0]=i=>C(f)?f.value=i:f=i)},null,8,Te),[[w,s(f)]])]),e("div",Ae,[k(e("input",{type:"password",id:"form3Example4",class:"form-control form-control-lg",placeholder:o.$t("Password"),"onUpdate:modelValue":t[1]||(t[1]=i=>C(m)?m.value=i:m=i)},null,8,Ie),[[w,s(m)]])]),e("div",De,[e("div",Ue,[Ge,e("label",Me,a(o.$t("RememberMe")),1)])]),e("div",Ee,[e("button",{type:"button",class:"btn btn-lg",style:{"padding-left":"2.5rem","padding-right":"2.5rem"},onClick:t[2]||(t[2]=i=>Q()),disabled:s(v)},a(o.$t("Login")),9,Be),e("div",He,[e("div",je,[s(n)?(u(),r("p",Fe,"* "+a(o.$t(s(n))),1)):h("",!0)])]),e("p",We,[d(a(o.$t("DontHaveAnAccount"))+" ",1),_(H,{to:s(T)("/user/register"),class:"link fw-bold",title:o.$t("Register")},{default:g(()=>[d(a(o.$t("Register")),1)]),_:1},8,["to","title"])])])])]),e("div",qe,[e("form",ze,[e("div",Oe,[e("div",Qe,[Ye,e("div",Je,[k(e("input",{type:"tel",id:"phone",maxlength:"10",class:"form-control form-control-lg",placeholder:o.$t("PhoneNumberMask"),"onUpdate:modelValue":t[3]||(t[3]=i=>C(p)?p.value=i:null),onInput:z},null,40,Ke),[[w,s(p)]])])])]),s(U)?(u(),r("div",Xe,[e("div",Ze,[e("div",et,[e("div",tt,[e("label",ot,a(o.$t("VerificationCode")),1),k(e("input",{type:"password",id:"code",class:"form-control form-control-lg w-100",placeholder:o.$t("VerificationCode"),"onUpdate:modelValue":t[4]||(t[4]=i=>C(y)?y.value=i:null),disabled:s(D),maxlength:"5"},null,8,st),[[w,s(y)]])])]),e("div",at,[s(x)?(u(),r("span",{key:0,onClick:t[5]||(t[5]=i=>M()),style:{"font-size":"14px",cursor:"pointer","margin-bottom":"10px",opacity:"0.8"},class:"my-2"},a(o.$t("GetNewCode"))+" ↺",1)):h("",!0)])])])):h("",!0),e("div",nt,[s(G)?h("",!0):(u(),r("span",{key:0,onClick:t[6]||(t[6]=i=>M()),class:"send-code-btn btn"},a(o.$t("GetVerificationCode")),1))]),e("div",lt,[s(x)?(u(),r("button",{key:0,type:"button",class:"verification-bordered-btn btn-lg",style:{"padding-left":"2.5rem","padding-right":"2.5rem"},onClick:t[7]||(t[7]=i=>O()),disabled:s(v)},a(o.$t("Confirm")),9,it)):h("",!0)]),e("div",ct,[e("div",rt,[s(n)?(u(),r("p",dt,"* "+a(o.$t(s(n))),1)):h("",!0)])])])])])]),ut,e("div",null,[_(H,{to:s(T)("/"),class:"text-dark opacity-50 text-decoration-none fs-6",title:o.$t("BackHome")},{default:g(()=>[d("⤶ "+a(o.$t("BackHome")),1)]),_:1},8,["to","title"])])])])])])])])],64)}}},wt=ce(mt,[["__scopeId","data-v-a779432e"]]);export{wt as default};
